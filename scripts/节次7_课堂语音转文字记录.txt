02:37是停嗯，是行，开始出去心情爱世界。嗯嗯，好，我们开始上课。
05:50那今天呢我们呃来讲一下这个从文件系统角度啊来讲一下这个系统的复杂性啊。然后这个呃重点的话两方面我们前面说的，第一就是文件系统本身作为一个系统重要的组件，它自己也是一个小小的一个系统的文件系统。那么他是有什么问题怎么做的？第二个就是怎么通过文件系统这样一个 case 啊，
06:20去观察呃系统，尤其是硬件对于系统的这个影响，硬件的发展对于系统的影响 OK。好，那么我们先来看一下文件系统的大致的一个概念。因为有不少同学啊，
06:38可能是之前啊没有在文件审方面有比较深的了解。所以呢我们先会带着大家过一遍基础的文件系统的这个这个内容，然后我们再进一步深入啊，这样的话呢就避免一下子啊这个这个陷入到太多的这个细节中文件系统的位置。我们先来看一下，它是在这个应用和这个硬件啊之间，
07:02在应用和硬件之间，在上面的应用呢，通过这个 open ary、 right close 等等这样的接口会调到这个文件系统底下呢这个磁盘会提供一个 read 和 right 这样的一个操作。这个操作呢传进去的是一个 block address 和一个 buffer，对吧？
07:22如何写？然后就往一个固定的地方写就行了。那么这个 block address 可以可以认为它就把磁盘抽象成了一个大的数组，对吧？后面就是往数组里面要体现内容，它就是个下标。
07:35数组下标。那为什么我们在这还要放一个 memory 呢？是因为今天我们已经有很多非意识性的 memory 啊， no volunteer memory。比如说英特尔之前这个奥腾芯片啊，就是一个插在内存上面的这个内存条上面的非意识性的这个 memory。
07:54也有很多人基于 memory 做了这样一个接口啊，做了这样一个磁盘的这个接口，从而对上提供类似于磁盘的这个服务。断电之后数据还在，那么通常直接跟这个硬件打交道的，尤其是这个磁盘，
08:08我们不是 far system，对吧？而是一个 this driver。这个 driver 的话呢，他负责去把这个磁盘的不一样的地方封装掉。 OK。
08:19所以从本质上来说，我们认为这个 read run 接口的话，更多的是在这一层去掉哈。就是你底下呢你还有很多别的接口，比如说去配置，对吧？
08:29要去控制这个磁盘呃，磁头它的磁道它的等等很多这些这些信息都是由这个 discriver 来管。但是他替我们封装好了，底下的异构性啊，所以我们不用担心，我们买的是希捷的硬盘，
08:41西数的硬盘，日立的硬盘或者长江存储。来 CC 就不用管啊，反正他都帮你封装好了。然后由他向 disco driver 啊，向 flashism 去提供一个 rewrright。
08:52这样一个简单的把磁盘认为是一个大数组的这样一个抽象啊，这个就是我们基本的一个这个结构。在 unitise 文连锁里面呢，定义了 open rewrite see cloth，那这样是接口。此外呢还有 i think i think 呢，
09:08就是让磁盘会让这个 e 呃 OS 把缓存刷到图标上去。对吧？ sit 一下。此外呢还有 SDAT state 获得一个文件的原数据啊， change mode、 change owner 就是用来改文件的权限和所有者。
09:25此外还有 rename 对吧？ rename 就给点文件改名啊，可大家觉得 rename 这个操作一下子觉得比较陌生。其实 rename 就是就是就是一个什么操作啊，对那个就什么操作啊，就是木对吧？
09:38其实 renew 就是木啊哎 rename 操作，然后呢，此外还有这个 link or link 啊，就是硬链接和这个软链接，或者叫符号链接，对吧？
09:48最后还有对目录的操作，就是创建目录是吧？然后改变目录和这个改变根目录 change 入 t 迁 root 大家可能用的不多啊，迁 in root 本质上就是把当前的一个进程，它的真目录啊迁到某一个具体的目录下面去，从而让这个进程呢就困在这个文件系统里面，
10:10困在这个小小的一个子文件系统里面，他再也出不来了。为什么？因为他如果再往上走的话，就走出去了啊。因为把它放在一个目录下，
10:20这个目录就是它的根目录。他再想要 CD 点点，它是上不去的那所以他只能够看到这个子目录下面的别的这个目录，而看不到这个目录之外的这个目录。 OK，这个是我们说的这个迁移 root，
10:35迁移 root 这个功能的话，主要是用来做沙盒的啊，沙箱对吧？你比如说你迁移 root，把一个应用程序啊，把它先注册一下。
10:42这样的话呢就算它运行的过程中出了问题，对吧？他也不会影响到别的目录啊，他不会把别的目录写坏掉啊。所以呢在 free BST 上面， chanshot 又有一个名字叫 jail，
10:54就是监狱啊，就 jail，把你 jail 起来，把你关起进去，就会把它关起来。处在地就是天柱千柱，
11:02大家用的不多啊，大家如果玩过这个 LSF，对吧？ LFS 叫 linux from scratch 啊，就是从头编编一个 linux。如果大家玩过这个的话，
11:13就知道这个还是很有用的啊。因为它迁 root 之后的话呢，就可以让你去进入到你自己编译的一个 linux 的一个系统里面去 OK。所以这个签 root 那我们再去简单提一下。此外呢，还有整个文件系统的一开始 mount 和 amount，
11:31对吧？挂载和这个这个把文件系系统把它给撤下来。那么对来来说呢，最重要的一个结构就是这个 vinisannoal structure i no structure 本质就是我们需要用很小的一块数据啊，去把一个文件呢整体描述清楚。这上面呢有文件的大小，
11:49在此有文件的可读可写，可执行的权限。那最重要的就是它的这个 index 的作用啊，它的 i note 就是因为全称叫 index node。这个应该说在这边每一项都指向了一个磁盘的 block number，然后呢指向某一个 block number 呢，
12:06这里面才是真正的数据，对吧？它这这个不是 block 的数据，然后呢它可以指向一个二级的一个 index 的 indirect block。然后呢，由它再指向，
12:16真正的也可以指向一个三级的啊，只是指到这儿，再指到这儿，再指到这儿。这是一级、二级、
12:22三级三种不同的这个这个索引的这个方法 OK。那么这个结构的话呢，其实如果大家对系统比较熟悉的话啊，就发现它其实是非常让人这个这个不陌生的一个数据结构啊，这个和什么比较像。但是大家和 OS 里面学过什么比较像呃页表嗯，
12:47非常好，这个页表。那那接下来你觉得它跟页表有什么区别？电表里面也有一级列表，二级列表，三级列表，
13:03对不对？列表里面有大页，还记得大爷吗？列表里面一个页，它指向指向多大？内存一个页多，
13:13大四 KB 四 KB 大叶多大？两个笔，两个笔再大一点呢，再买几几笔几笔一记笔，对不对？它是五百一十二倍，
13:26往上去乘的很好啊。但是如果你是在页表里面的话，如果你要它这个看上去是多级的，对不对？多级索引对不对？列表是不是有多级的？
13:36但是页表它如果是四级列表，用满末级就是四 k 对不对？如果你不用最后一级，你用第三你用三级。那那个第三级的话，指数区是一是一个，
13:46这个是一个两兆的一个页，对不对？但这个不一样，这个是不一样。这个你看它是一级的，一级指指出去的是是一个 block，
13:55二级指出去的也是一个 block。然后这个 block 就是像一个 block，所以它的上一级的这个这个像页表一样的这个 entry 啊，它指出去的和这一级指出去的它都是一个页，而不是说会有什么差别。那为什么会这样呢？
14:17为什么会这样？其实原点很简单啊，原点很简单，就是因为在内存里面的话，谁去做页表的解释的这个工作。比如你一级列表、
14:27二级列表、三级页表，谁去走做？这个列表解释的工作并没有是 MMU 系统对不对， MMU 是什么？是 CPU 里面的硬件。
14:37所以 CPU 里面的硬件啊，它在做这个解释工作的时候，在解释每一个 entry 是多少的时候，其实它是没有那么灵活的，它是写死的。 ok 它必须要非常规整。
14:50 OK 所有的四节表统一都是四 k 所有的三节表统一都是两两两兆。所有的两节表统一都指过去是这个是这个一兆，它非常的规整，而且你也不允许出现在同一级里面。有些指针是一级的，有些是二级，
15:08有些三级。但在这个 l 里面呢就比较简单了啊，安诺里面为什么比较简单？你看我这有一二三四五六，对吧？我有六个一一的的，
15:18有一个二级的，有一个三级的那如果我想把它改一改，我我两个三级的，两个二级的对吧？然后剩下四个是一级的，可以吗？
15:29完全是可以。那为什么这就可以的呢？原因很简单，是因为对他做解释的是什么？是谁啊？谁去解释？
15:36这个 i know 的文件系统就是我们的文件系统，就是我们的这个东西，对不对？这文件系统你改一下不就行了嘛，对不对，改一下软件就行了。
15:46所以说在页表里面，页表呢它的解释权是由 CPU 来决定的。页表格式是在哪定义的？是在 OS 的手册里定义的，还是在英特尔 CPU 手册里定义的啊？页表的页表的这个格式，
16:01谁定义的？是 CPU 定义。对，很好啊，仪表的格式是 CPU 定义的那你你定了之后就没法改了。但是这个是谁定义的啊？
16:12这个是由 linux 定义的，是由 OS 定义的，对不对？在 kero 的文档里面告诉你 i 诺的结构是什么样子，这都是软件做。所以呢它这个相对灵活一些啊，
16:22它的这个不同的这个层次，多级页表这个层次啊，像多机页表一样。但是呢它比多机、页表灵，你想改来改去都可以。
16:31好，那么磁盘它有了这个 l 的之后， l 的存什么地方呢？我们假设这是一个磁盘，从零一直到六十三，是整个磁盘的 block，
16:42有六十四个 block。然后可以看到这里有一个 data region，单位默契是这样的那从这个地方开始啊，就是 data region 啊，从这个地方开始， data region 大部分看到都是 data region，
17:06对吧？二十七、然后呢在 data readon 的前面，对吧？ data readon 的前面有一块就是用来放 i node 啊，这块就是用来放 i node，
17:20这块呢叫 i note table 啊， i no table。 i notable 就是把 i note 密密麻麻放到一块儿。那么一般来说呢我们说 i node 多大呢？ i node 一般啊大家如果有一个定量的一个思考的话，就会发现一个 block。
17:34如果是四 k 的话，一个 block 如果是四 k 一个 i node 呢差不多是一 k 啊，一个 inote 是一 k 这是一个 block，这是一个 block。四 k 这其中呢就是一个 m 的一 k 左右，它比一颗稍微小一点点。
18:02好，我们就放在这个 data 的前面，就是一堆 i note OK 这个 l 的一旦放好之后，有一个数字就定了什么数字啊，一旦 i know table 的数量定了，我们这 i know 的每个人用的是一 k 对不对？
18:17但当你 i know 的 table 大概定了之后，什么数字就定了，什么数数字就零，改动的就是数量就定，对不对？所以你的电脑里面的文件的个数啊，
18:30其实是有上限的对吧？你想你文件，你能一直创建新文件创建新文件呃，无限制创创建下去吗？就在你磁盘还没有满的时候，在你持盘还没有买的时候，
18:42可能你的文件就不能再创建啊。对不起，你的文件已到上线啊，无法创建新文件。你看哎，我磁盘还有好多呀，
18:51还没用完呢。那这个没有，为啥？因为决定磁盘里面文件上限的是什么呀？是 i know 的 table 的大小，对不对？
19:00因为 i no 大小是固定的， i know table 大小是固定除一除不就是数量吗？ ok 所以就算你后面有数据在啊，你的文件大小也有可能会被限制。好， i note 前面是什么呢？
19:14 i note 的前面是有两个 bit map，啊呀 bit map，分别是这个 i know 的 bit map 和 data 的 bit map。这个 i know 的 data map， bit map 就是一个零一零一的比特。零表示 free 一表示被用着通过这个零一零一的比特呢，
19:39我们就知道 i no 的 table 里面的 i no 哪些已经在用了，哪些还没有用，哪些是 free 的啊，哪些是 in use。同样这个 d 是 data 的 beitmap，就是后面有这么多 block，
19:51对不对？那这么多 block，这么多 block，哪些已经被占，哪些还没有被占，是 free 的由这个 d 来表示。
19:58那为什么这个 i 和 d 这么小呢？为什么 i 和 d 这么小呢？因为它的结构数据结构非常紧凑，它就是 bita map。大家讲 beatmap 就是一个 beat，对不对？
20:07一个 beat 就能够表示啊表示这个一个就一个 block 到底用和不用，它就两种状态，所以它非常紧凑啊，你放前面就可以，最头上就是这个 super block。 super block 呢它里面包含了一些关键的信息，
20:23比如说我有多少个 i note，他说我这有八十个 i note 啊，就这个地方有八十 i，那我有多少 nodear block，我有五十六个 deatblock。然后呢，
20:30我从我 i note table 从哪开始的？我是从第三个 block 开始的啊，等等我 data block 从哪开始的啊？那是从第八 block 开始， OK 在 super block 里面记录的，是加载这个文件系统所必须要知道的信息。
20:47如果你连 i know table 从哪开始都不知道，那请问你怎么去找 i know 的呢？对不对？是不是？所以 super block 就在这个头上的这个它有个好处，就是大家都知道第一个就是 super block OK，
20:59第一个 block 一定是 super block 里面记得 block 再去加载。 i know 的 beea map 在哪儿啊？ data bita map 在哪儿？ i know table 在哪儿？ data 从哪开始等等，都是是由 super box 来来来来这个来这个来这个来这个介绍。
21:19所以呢 super block 它最终是服务 mount 的，对不对？ mount 和 mt amount 啊。好，有了这个之后呢，接下来我们来过一个这个过一下啊，
21:31这个呢反正大家学过的就再过一遍复习，没有学过的同学呢就就就就跟着我们一块走一遍。现在我的一个目标是要去找到杠 problems，杠 home 点 c 这样一个文件在什么位置 OK。然后整个磁盘也长这个样子。这个磁盘的结构和我们前面说的结构是一模一样的啊，
21:51一模一样。那我前面那个 i 和 d 没画出来，就是 bit map 两个没画出来， super block 我也没画出来，我只画了 i note table 和 data block， i know table 在这儿，
22:02 data block 在后面。好，接下来我们要去找这个泡点 c 我们的磁盘应该先读哪个 block 眼睛，应该先往哪看。这个字符出来拿到之后，如果你是文件型的话，
22:15你先干啥？你先看后面还是先看前面，先看这儿，对不对？这个杠是什么意思啊？杠第一个是杠，
22:26注意啊，杠是分割符啊。大才同学很多同学说杠就是根目录，对吧？杠其实分割符啊，杠不是根目录，
22:33根目录是啥呢？根目录没有，他没有名字，为什么公路没有名字呢？因为如果根部录有名字的话，那谁去做这个目名字的翻译呢？
22:45就没有人做名字的翻译，所以根目录是没有名字的。 OK 其他文件是有名字的，但根目录没有。所以它其实这个杠的前面有一个没有名字的根目录啊，这个杠是个分割符。
22:56好，那么首先我们第一第一步肯定是要找根目录，对不对？根目录在什么位置啊？这个呢就是一个约定组成啦，就是我们要去做这个把文件名翻译到 i node，
23:11对吧？再翻译到最终的这个位置，要有约定俗成。因为根目录嘛，但是开始嘛，所以根目录我们的约定俗成就是它是第一个。
23:22 i note 第一个 i know 在哪第几个 blow 开啊，第一个按钮在哪？就在 i know the table 的第一个，对不对？就在这儿，就是它，
23:37也就是我们的 block number 四开始是 i know table，第一个 i know 的就是这个地方在这里写了一二三四五六七八九，这个是 i know number OKI know number 啊， i know number 就表示 i know table 里面的 index。 ok 好，我们就先去找磁盘，
23:57找磁盘呢，我就知道刚刚加载的加载 mount 的时候啊， super block 里面就告诉你了， i 的 notable 从第四个 block 开始，你看第四个 block 对不对？这一块嘛，
24:09第四个 block 开始，那我就找第四个 block 里面的第一个，那我就是十四三七十六，这里面记的是什么？ number 十四三七十六是什么 number 是什么 number？是 i know 的 number 还是 block number，
24:24还是什么别的 number？是 block number，为什么就这个嘛，对不对？就这个 inode 里面记的是 block number，所以所以它里面记的是这个 block nuver 十四。
24:37那我们接下来看哪儿啊，眼睛就要看到这个十四，对不对？因为这个是 block number，对吧？这是 number bck，
24:46十四十四里面的话呢，有一个这个东东这个个个啥呀？十四里面记得是这个 programs，七哈 program 七，这是个啥呀？啊如果你去 data 六啊，
25:07这个一条是什么东西啊，这一条这一条我们就叫做目录项，对不对？ directory entry direction entry direct entry。它就是记录某一个文件名到矮 no 的它的映射。那它是一组这个映射关系，
25:32它就像一个 table 一样，记录这个映射关系。 OK 这个 table 的映射关系和我们去问一下大家，如果有书的话，可以翻到书的最头上那几页，对不对？
25:46叫第一章对吧？一第二章六这个叫什么？叫目录对不对？所以它叫目录 OK。所以我们一定要强调，每次我都要强调啊，
26:02目录是一个标准的翻译， folder 文件夹这个翻译啊是错误的，或者说是不精确的对吧？因为文件夹给人一种文件越多越厚的感觉，但是一本书的目录厚不厚，和这本书厚不厚有关系吗？
26:23一本书的目录厚不厚，和这个书厚不厚有关系吧？明白什么一本书的目录厚不厚和什么有关系？章节和你的章节数量以及章节的名字有关系，对不对？你跟章节名一交张杰的剧长无比，
26:38那你目录当然就厚了是吧？你有一百张，那你的目录当然就厚了。所以说目录的大小和这个目录所记录的文件的数量有关，而和这个文件的大小无关，对不对？
26:53这就是我们说的这个目录。好，当我们找到这样一个十四号 block 的时候，我们预期它就是这样的目录结构。为什么？因为这个目录结构指的是这个 programs 七 data 六这样一个目录结构，
27:07它是由文件系统来定义的啊，它有文件怎么定义？文件系统就规定了文件的目录只能长这个样子。好，定义完了之后，接下来我们就要去找这个 programs，
27:17对不对？为了 programs，然后呢，我们找到 programs，后面有个七七是什么 number， block lock 啊，
27:24 block i know 七明白了七啊。如果这个七是 block number 的话，它它就找不到 l 了。所以说这个 programs 是文件的名字，对吧？字符串这个七是它对应的 i node，
27:41为什么是它对应的 i node 呢？因为你拿到 i node，就相当于抓住了这个文件所有的 block。因为这个文有很多 blolock，它不是叫一个 block，你不能把七认为是多，
27:48所以七的话就是一个 i node number。好，接下来我们看到儿啊七那就到这儿。 OK 七，你这个七的话是从这个地方开始找七个，对不对？
28:03从这个 m table 开始找七个下标找到这儿，然后里面有二三二八、五一五五，这什么呢？本啊，这是 number，
28:11这是 block，这个是 block number，为啥呀？因为这表示我这个 programs 这个文件它对应的 i node 是七。那么我这个 i know 的记录的就是 program 这个文件所对应的数据在什么地方？然后呢，
28:27我就找这个看二三对吧？看二三二三一看，又到这儿了，发现哦原来他还是一个什么，还是一个目录，对不对？
28:39比如说哎怎么怎么你这个目录，你的目录，你看长这个样子，怎么你的这块链文件长这个样子啊，文件就是一个目录，目录就是一种文件，
28:48说错了，目录是一种文件，对吧？文件不一定是目录啊，但目录一定是一个文件，角度是一样的，
28:54都有 i know 的 OK，所有的文件都有 i know 所有的目录是文件，所以所有的目录都有 MN。好，然后呢我们就看二三二三，就是找这儿了。
29:03找这儿之后呢，发现一个泡扁 c 九，我们从上面这个传进来的这个列里找到泡点 c 是我接下来最后一个要找的文件，然后它对应是九，这个九，什么是什什么么个啊？
29:14 i no 那个不然 i nono，然后呢，我们就找到九九的话，就到这儿了。六十一。然后这个时候发现这个九号的 i node 一共有三个 block，
29:23六十四四四四十五，然后们找到六十一，最后我们找到二这个在这个地方对吧？六十一号啊，这个六十一的 block 里面记录的是这个后面 c 对应的这个源码数据就在这儿。所以整个这个过程下来的话，
29:37我们发现其实啊这个就是从根目录开始一级目录，一级目录往下去找找目录的过程，本质上就是在根先从根目录下去找那个目录目录项，对不对？找到 programs 对应的这个 i note 再通过 i note 找到 i note 通过 i note 找到 programs 本身这个目录记得所以记得这个目录对吧？然后再再找在里面再找碰点 c 等等。
30:06如果我有十级目录的话，我无非就是顺着这个循环一直往下走，最后一定能找到一个文件。这个文件啊，它这个就找文件的过程和找目录的过程其实是一样的，对不对？
30:19其实是一样的啊，唯一的不一样就是文件系统是能够定义目录长什么样，但它不能够定义你别的文件长什么样，对不对？就是就是这个 programs 七 data 六，这个结构是由谁来定义的？
30:38现在第一张就跟 l 的一样，这个结构是由文件系统来定义的。 OK 这个结构啊是由文件系统来定义。所以在这个里面最复杂的就是这个目录项啊，最复杂就是目录项。我们如果进一步的去看看一个例子，
30:56假设我们现在有一个目录叫 temp 目录，下面有四个文件叫 ABCD。然后呢，还有两个点和点点，这两个点和点点呢分别是硬链接指向当前的目录和上一节目录。我用一个杠 AI，
31:12杠 AIA 表示哦， i 表示 i node OK，就我把所有的 i node 都列出来，所以前面有一个数字，五四五七呃，七五三六九零九，
31:22这就是一个 i node number，可以看到这后面几个是挨在一块，对吧？前面几个不挨一块，但是后面几个是挨在一块的。好，
31:31接下来呢我们把它变成一个十六进制啊，我们把那个什么七六七五三六九零九等等变成十六进制，就变成了这十这六个十六进制的这个数啊，这个用来做后面的事儿。然后呢，我们打开 debug FS，
31:47然后呢，我们把这个文件，把这个目录啊叫 cmp 的这个目录把它给 down 出来。 OK，大家有没有想过去看一个目录到底长什么样哈，一个目录里面到底长什么样子，
31:58对吧？我们要去看这个目录，你说哎**作一个目录我能够 open 吗？注意啊，目录不像文件啊，虽然它是一个文件，
32:05但是特殊的文件你不能够像打印一个点， c 文件一样，把一个目录的内容打印出来，你怎么打印一个目录的内容，打印不出来的。 OK，
32:16现在我说我这儿有点 c 文件，你给我打印一下，你可以把它打印出来，对不对？那但但但是如果你我有个目录，你把它打印一下怎么打？
32:24所以我们要用第八个 FS。第八个 FS 的好处就是它能够去 dump，它去 dump，就是它把它把这个 pank 这个目录啊，把它出来之后变成一个点 dumalt 文件。当然了，
32:33这个点 alt 文件，如果我们用叉叉 d 我用叉 RD 去看的话呢，这个点二层面就长这个样子。这就是就从这个红色的第一个零 d 一零 d 一零到这个地方，就是这个目录在磁盘上保存的数据， OK 保存的数据。
32:49好，有了这个之后呢，我们就去把去做一些分析啊，我们发现其实它是一行一行，就从从这个红的到这个地方正好是一行，从这个地方到这里是一行，
33:01这个地方到这里是一行，为什么呢？你看这个零 d 一零不就上面那个七三，对吧？七三零零它是零零七三零 d 零一，它是零一零 d 为什么为什么这样反过来，
33:16不要反过来，你看零 d 零一，它上面是这个是零一零 d 对吧，对吧？然后你这个 e 七 b 一，它这个是 b 一，
33:29 e 七，为啥是反的呀？小对啊，很好啊，这个这个考基本功的它是 little ending，对吧？
33:35 little ending 啊，它不是 big ending， big ending 就就是就是正的啊， little little ended，就是反的 OK。好，
33:41那么我们把它做一个整理，从这个地方按一个回车啊，在这个地方按一个回车就变成了这样。就是这样一共有六行。每一行呢正好就代表一个文件，它就是一个目录项。
33:53 in direction action 这个 direction entry 最重要的信息有哪些呢？我们去看 linux 的源码，发现每个 direcct entry 就长这个样子，一共有一二三四五有五个字段，这五个字段就构成了这么一行，分别是红色、
34:08蓝色、黄色、灰色、紫紫色和这个绿色对吧？就是这个为什么它有一些长有些短啊？因为它是 u in 的三的十六六八八对吧？
34:18这两个八比较小。好，那么对于 ununi don't number 来说的话，这个我们前面看过的对吧？这个是我们刚刚把那个十进制转换成十六进制，对吧？
34:26得到了这个红色的，这个都是 anno number，这个没问题，接下来就是一个 direction length。零 c 零 c 的话是表示多少？零 c 是表示多少？
34:36十二十二的话，大家看正好一二三四五六，对吧？二六一十二，因为这就是两个 bit，对吧？
34:43就是零 d 是一个 bit 对吧？零 d 是那就两个 bit，两个 bit，两个 bit，二六十二正好这一行就是十二，但最后一个比较长。
34:50最后一个的话是呃四零 f 四零 f 是什么意思呢？四零 f 啊，其实就是剩下啊，就是就就就是剩下的就是你把你把这个其实就是零 f 零 FC 四啊，写错了就不是四零，是 c 四零，
35:05其实是零 FC 四零 FC 四。加上前面五个零 c 加在一块儿的话，就是一零零零啊，就是就一零零零。所以说这个它的一个大小就是四 k 因为就是四 k 嘛，对不对？
35:19一个它的一个 block 就是四 k 然后呢，反正用了十二十二、十二、十二、十二，剩下就是四 k 减十二啊，
35:28就是这个 CC 四零 f，这个是 v to end 啊，倒过来。好，接下来是这个 frightenless fightenless，你看这个是零一对吧，
35:35零一表示它只有一个字节，一个字节是什么？二一二 e 是啥？忘了，再看下面一个两个字节。对吧零二啊 file name less，
35:45两个两个字节叫二一二一啊，我们就猜出来了。二一是什么意思啊？点你看二 e 二一二一对吧，所以二 e 就是点的这个阿斯托字符，接下来是六一六二六三六四六，
36:01一到二六三四什么意思啊？那不就正好是 ABCD 嘛，连着的，对不对？所以说这个后面就是文件名了啊，就是文件。
36:08所以每一行的话都是从 i node 到文件名的映射。那如果我要去找的话，我就要在我就要得到这样的数据结构，对不对？然后从从这个地方开始，从第地方开始做一个字符串的一个匹配。
36:20匹配到一个字符串之后，再到前面去找它的 l number。这就是我们文件系统在一个目录里面找文件对应的 m 的在哪这样一个操作。非常简单啊，非常简单。那还有一个叫叫 fuar type，
36:33紫色的叫 fuar type far tape 是什么呢？我们也把它 linux 代里面拿出来。但是 linux 代里面一共就是有，应该一共就八种八种类型已经很多了。我们学过的目前啊只有两种，第一种叫 regulify regulify，
36:46就普通文件点 c 点 h 对吧？照片文件文档啊 DOC，还有一个是比如水目录目录是一类特殊的文件 OK，但是它不是普通文件，它是有结构的，它的结构就长成这个样子，
37:01除外呢。还有一些别的，比如说呃这个是 device five 啊，然后呢还有是有 j 个是 block adasfile 啊，就是 character responfy。这个呢我们以后想，
37:10如果讲 OS 的话，会进一步介绍。大家在这里只要知道两类文件，普通文件是最常见的，和这个目录文件就可以了。接下来的话呢，
37:20我们就把文件系统里面最重要的数据结构叫做 director action 啊，我们来给讲清楚了。 OK director 就讲讲就讲这个样子哦，这还有一个 symbolic link 对吧？ symbolic link 啊，它是一类特殊的文件，
37:34它不是普通文件啊，就是符号链接它会转出去。那么什么是 symbolic？ link 呢？我们要叫两类， link 啊两类 link。
37:43第一类， link 呢叫 hard link， hard link 啊，其实就是一个文件名。比如我们前面提的在目录里面有这个 a 然后呢后面对应个对一个，比如说这个 i no 的是长成，
37:58比如说二十三，对不对？这是我们说的一个目录项，有一个 a 一个二三，我就可以打开目录，下面的 a 你可以找到二十三，
38:07那我也可以给他一个名字叫 a 点二，也叫二十三。这样的话呢这个矮弄的都是二十三，它就有两个名字，第一个叫 a 第二个叫 a 点啊。注意啊，
38:23这两个名字就叫哈德利姆 hard link 的 holink 就是在目录里面啊的某一个 enh，就是一个 link 就是文件名 hard， link 就是文件名文件可以有很多个名字，因为文件名本身啊它不是文件的原数据， OK，文件名是保存在目录里面的，
38:50文件名和文件是没有关系。这点的话其实也是有点反职权，就是说一文件名和文件一点关系都没有。 ok 文件名保存在 i noad 里面吗？不保存文件的大小和文件有关系吗？文件 size 有关系吗？
39:06文件的 size 和文件是有关系的， OK 文件的权限和文件有关系吗？和文件也是有关系的。文件的 owner 跟文件有关系吗？文件的修改日期，上一次打开的日期，
39:21这些和文件有关系吗？注意啊，这些都是文件的原数据 OK，但是文件名跟文件是没有关系的啊，文件名跟文件没有关系。为什么我们的 unix 的这个 i no 的这个设计就设计呈现文件名和文件是没有关系的。
39:40其实我们很多时候想身高体重是跟我这个人相关的，对不对？我拿到我一个人，我去测一下，我身高体重出来。但如果我已经忘了我是谁，
39:48就或者说就我就不说，我就什么什么话都不说，有别人可以知道我叫什么吗？没有，对不对？你可以称我有多重，
39:58你可以称量我有多高，但是你不知道我叫什么，为什么？因为一个人的名字跟这个人也没什么关系，对不对？你们也可以随便给我换一个名词都可以。
40:10那怎么采取定一个人的名字叫什么呢？我们要去登记注册一下，对不对？要注册说啊，有一个人什么时候生出生的啊，他这个有一个名字，
40:21你要注册一下，注在哪儿就住在这儿。所以目录就是给一个文件命名的过程。 OK。那既然你目录可以给一个文件命名，你也可以给这个文件再给他一个名字，
40:35对不对？所以就这样的话就非常的灵活啊，你可以在一个你有一个文件，比如很深很深，叫杠 a 杠 b 杠 c 杠 d 十层目录有一个名字，你完全可以在根目录里面给他加一个名字，
40:49直接就就就指向这个 i note。这样的话你下次用它就很方便啊，叫快捷方式 OK。这是我们说的他的还有一个呢就是 soft ink、 ofofink。 sofkink 呢它是这样，
41:07它是这样啊，比如说我们新建一个 soft ink，对吧？叫 link 有一个命令叫 LN。 link 加 s 表示 soft 或者 symbol。然后呢，
41:18我指向一个叫杠 time 杠 ABC 的这样一个这样一个内容啊，这就是给指向这样一个 name。那我这个 soft link 叫啥呢？叫 s link。好，接下来我们看一下这个 s link 啊，
41:31运运行一个叫 LS 杠 l 竖着的。然后呢，它就哎告诉你说我这个指向杠 time 杠 AVT，然后这个时候我去 read link 哈这个命令大家应该没怎么用过啊，这个 read link 本质上就是去读这个 synbolic， link 指向什么地方。
41:47它要告诉你说，我指向杠 time 和 MBCOK。好，接下来如果我去 ct 一下这个 s link get，大家知道打印的意思，对不对？
41:57就是把这个文件所有内容打出来，那会怎么样呢？这行命令执行的结果是啥？路境吗？什么 cat cat s 零零会怎么样？想想嗯会怎么样，
42:28对不对？ ABC 的内容来会告诉你，没有这个文件，为什么呢？因为我前面忘了说了，其实我们就主要是没说，
42:37就是根本就没有这个刚过杠预明细 tiok，你说哎等等没有杠跳杠 MAC。那我这个 symbolic 的指向它怎么回事呢？我就是一个 symbolic， link OK，我指向一个文件，
42:48这个文件在和不在，跟我没关系，我只是指向它而已。指向这个指向这个文件 OK，它指向了这个文件的名字，指向这个文件的名字，
42:57就它只是把这个文件的名字记录下来。至于这个文件真的在呢还是不在呢？其实并没有关系，于是我们就把一个 hello world echo 一下打印到了这个杠 time 杠 ABC。于是我们就创建了一个文件叫杠 time time 杠 ABC，并且里面有一个 hello world，
43:13对不对？创建好了，于是我们再开始 s link，这次结果是什么？ hello world，这次结果啊就是就 hello word 了。
43:21因为这个时候他已经在了 OK。所以当我们去打开一个文件的时候，如果它的 type 是零 x 七，他 m type 圣音 x 七，我们就就在把它打开完之后，不能停下来，
43:40为什么？因为我们知道这个零零 x 七是个 symbolic， link 当我把一个 symbolic link 打开之后，它里面一定记了一个文件名。 OK 就这个文件里文件的内容在磁盘上，这个文件内容就是一个文件名。
43:54当我们拿到这个文件名之后，我们是文件锁啊，当文件。所拿到这个文件名之后，他需要再做一次 open，对不对？
44:01再说一次，这次 opopen，如果这个文件它保存这个文件名是不存在的。这次 open 就会出一个 fire， not found 的错误。如果存在，
44:12那么我就把把它打开了，并且把里面的内容可以可以去做处理。读刷也好，写的也好，都可以。这就是我们说的 symbolic liink。
44:22所以 you want anthe link 和 hard link 呢，是还是还是不一样？大家看这有个八八十个层，我们 LS 杠 l 的时候出了一个八对吧，就说我这个 s link 它，其实他他这什么意思啊？
44:40它的 size 是八，为什么它 size 是八呢？这个时候杠 temp 杠 ABC 压根儿还不在呢，对不对？啥都没有，那他怎么会有一个 size 呢？
44:50为什么这个三十八呀？原因非常简单，为啥大家看这个杠 tap 杠 ABC 有几个字符啊，是不是就八个字符？所以它其实它 size 八，就是因为他这个文件里面只保存了杠 tab 杠 ABC 这几个字符，
45:13仅此而已。 OK，仅此而已啊，所以呢 symbolic link 和 hard 的 link，我们说是完全不一样的 symbolic。 link 的本质是从一个把一个文件名记在这个文件里面 OK。
45:26然后呢，当你打开的时候呢，先读到这个文件，把里面的文件名读出来，通过文件名再去打开，真的这个文件 OK。
45:35那么当你拿到这个文件的文件名之后呢，你要去做一个 i note 的一个转换，对不对？到这段 i note OK，那就说哎我怎么根据 soft link 找到它的这个文件名呢？ sort flink 有自己的 i node 吗？
45:52 soft ink 有这样用的吗？有吗？当你建一个 soft link 的时候，我们的我们会不会占一个 i no 对吧？那肯定会否则你就存存哪儿呢，对不对？
46:05否则你那否则你一个字符串存哪呢？所以买这个 soft， link 本身啊它就是一个文件，它的 type 是零 x 七。这个小细节大家可以记一记，它本身要占一个 inode 的 OK，
46:19然后呢通过然后所以它才能够找到这个文件名。那这个文件呢找找到文件，再去通过它的 inode，找到真正的这个文件 i 弄啊，就这样一个过程。那为什么要有 soft link 呢？
46:30 hard link 和 soft link 从功能上面来说有什么区别呢？有什么事儿是 soft ink ink 做 sort link 不能做的啊，有什么事情如果没有的话，我们就没有必要去创建一个叫 soft link 的东西了。什么时候呢？他他能做出还是不能做呢？
46:48这个时候呢我们就要去看，比如说我这儿有个硬盘，有硬盘，它有根目录，工作下面有后是吧？ ETC 还有什么袜对吧？
47:02还有一个，比如说叫 m 嗯 t 有个帽子。这时候呢，我在这个电脑上插了一个 u 盘，我插了个 u 盘， OK 插了个 u 盘，
47:11我插了个 u 盘之后呢，它就把它挂载到这里，零挂断到 USB 零 OK。然后我们就可以通过叫杠帽 t 杠 USB 零找到这个 u 盘里面的文件。 u 盘里面有文件叫 a 点 test。在这个 u 盘的根目录上面，
47:29所外呢在这个后目录上面就有个 s 也有个文件叫 a 点 text。这两个文件都是 a 点 tex。但是因为他们在不同目录下，所以没没有什么冲突 OK，这个没有问题。好，
47:43接下来我想要在这个在这个这个这个根目录上面，我想要建一个 link，我要见一一我想要指到这个 a 点 TA 点 TXT，我它指过来哈登语口对啊，这个是哈顿啊，我们就叫 h leink 直过来这件事情能做到吗？
48:13在这儿直过来哈，等于可以做到吗？怎么做？我只要找到它的 i no 的对不对？然后在这个根目录里面加一个叫 h link，假设它的根目录，
48:24它的它的 IU 假设啊是二十三。那我只要在购物里面写一个叫 h link 二十三加这么一个流量肥，然曲是不是就可以了就可以了，对不对？好，现在我同样想在公路下建议它的立个。
48:44但是呢我不是想指向这个 a 我要指到这儿可以吗？可以吗？不可以不可以不是不可以不在同一个省频，因为它的 l 是二三，它的 l 的可能是多少？可能是十三，
49:01那我不能用这个十三，这个 l 为啥电视？因为你这是个 u 盘，对不对？你这就是个 u 盘， u 盘，
49:15它的 i no de 整个的这个地地址空间和我硬盘的这个 i node，这个地址空间是完全是两套，对不对？你这十三在我这儿可能是别的东西，对不对？比如说我这儿很可能我这个 alice 还有一个叫 b 点 test，
49:34他矮的可能就是十三，对不对？他十三已经占了它的， i 也是十三，这个时候就会发生错误啊，就发生错误。
49:43所以呢如果我们要解决这个问题，我们必须要我们就不能再用 noinote 去命名一个文件，去找一个文件，而是必须要有一个叫文件系统冒号。你的文件系统的一个名字，再加上十三，
49:58对不对？那这个很复杂，我们现在也不是这么做的，我们现在就是只用还有就是喜欢，好在这个情况下他怎么怎么处理呢？趴背子就无能为力了，
50:14你是没有办法跨文件系统去实现一个它的运转。所以我们就用 soft liink 双层，立刻就很方便。为啥？我我记忆有一点流行，再再都误会哪个层市会高一层 OK，
50:29这是我们说的 helandy 和 soft ing 啊，它还有个相应个区域。好，我们休息一下，不到五十五、十五吧啊，
50:43五十五十或者五十五吧，到时候我们稍微提前一点上课，这样的话我们可以提前一点下课啊，那先稍稍休息一下。对，是嘿哎，
54:10没事，不是。