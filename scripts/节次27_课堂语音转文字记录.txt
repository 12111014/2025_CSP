00:35一他这个可以，对你是申请呢？好，行，那那我们这个这个最后一点我们就快点讲话。好吧，
05:40因为我知道大家上课就可以比较累了啊。行，那那个那个就是说我们讲最后讲的啥，我们说这个这个智能网卡有些智能网卡，对吧？它看虽然看上去表面这个你使用起来很简单，
05:50但它其实背后有很多这个这个这个这个道道。这个这个你如果不不搞清楚的话，其实它你使用起来效率也很差的，等于等于没有用 OK。那我们这边发现的第一个特点就是说如果啊你用了一个你买了一个智，你买一个个阿 b 网卡卡 OK。
06:04然后第二天呢你想要快把它变成一个智能网卡，但是呢你还没想好怎么用它的这个智能网卡的能力啊？我们这边给了一个建议是说，你还不如不要用 RDV 网卡啊，不不要用智能网卡。为什么我们这边在一个同等规格的这个阿里云网卡和智能网卡的这个这个性能下，
06:21我们会发现啊，假设它的 nick call 注意啊，他们的 nick 是一样的。这个情况下的话，智能网卡的这个 cor DB 的吞吐的延迟都会更更更差，为什么呢？
06:30其实原因啊，当然其实第一点我们怎么保证一样，对吧？那这个时候我们就去看了一下这个网卡的四四四 k 啊，我们其实会发现像英伟达的这个网卡，它其实都是 RD 智智网卡，
06:40它基本上都是阿 d 莫网卡买的，所以它会告诉呃改的，所以它会告诉你它里面用的是哪一款这个 RDB 网卡的克 nio。然后呢，我们就特地去买了一块跟它一样的这个 RD 莫网卡做了一个对比的这个测试，然后不会发现这个性能会更差。
06:53那原因其实也很简单啊，我们会看到你原本的这个 RDM 网网络嘛，我是直接用 d 扣，直接就发到货色 deone 嘛，对吧？但是你如果是 RDV 的话，
07:01你要经过一个额外的这个 PCS watch，那这个其实会有额外外这样一个 head OK 的。所以说所以说它的 RDV 性能其实是不如一个 RDMA 网卡的。而且那你不仅考虑性能啊，其实这个智能网卡的功耗啊，其实都是会比 RDM 网卡高很多的 OK。
07:17好，但是我们发现了一个 RE 思的这样的一个特性性。除了如果不考虑三 d receive 的话啊，这个你去做路径二，就是你的这个这个这个 smart i 啊，不你的 cent 去跟跟 smark 上的这个 SOC 的这个 RDMA 通信是非常快的。
07:32它甚至会比你这个 RDMA 的这个通信还快， RDV 这个原本的这个 RDV 通信还快，为什么呢？我们我们这个这个后面啊我们去我们咨询询一下这个这个这个一一一内部内部部的这个个聊聊人员啊。他们就是说其实啊它的这个这个 PCIE 跟这个 SOC 的这个网络，包括这个三套这一套的这个互联总线啊，
07:53它不是 PCIE 啊，它其实是一套。这个应该叫做啊，他们内部好像有一套呃代号吧，反正这个就不方便说。但那 anyway 就是其实我们会发现它的内部的这一套路径实际上是比 PCI 要快。
08:06大家想 PCA 本质上它只是一个互联总线，对吧？以及其实现在有很多其他类似的这种总线，比如说 c 叉 i 啊，比如说 NV link 啊，对吧？
08:13这些都是不同总线协议。那么 PC 呃，那么 PCI 它其实不能够做到。目前来看，它不能做的非常快的个原因是它有很多的这个历史包袱。因为 PCI 是个非常特偷的总这个总线传输协议。
08:24你不仅是网卡，对吧？你其实显卡也好啊，你其他其他设备也好，都是得基于 PCI 一个后侧交互。但是如果你只是一个设备内部的话，
08:31其实我们没有必要考虑 PCI 这些很多枷锁啊，所以我们就能实现一个非常偷的这个路。所以说这边也就总结出了一个核心的点，就是说就是说这个啊当然不是说完全没有 PCI 啊，是它接的这部分只有 PCIE。但是它这个 PCI witch 和这个这个这个通信的这个这个这个这个这个这个这个 catch 本身这个这个它它有一段 PCA，
08:53但有一段其实不是 PCI 的。所以这个带带来这个结果，就是我们考虑的这个第二段的这个通信的话，它其实这个 spart c 的这个性能其实就会啊做的非常高啊，它其实是最最高的这样这样这样这样的一个性能 OK。好，
09:07那然然啊我们会发就就是你的一个 spmart 的对吧？它这这个这个你的 host 跟 spanank 的这个这个通信啊路径啊，它非常高效。但我们会发现有一个很有意思的现象，就是对于这个 read，如果你的一个 RDM read 这个请求，
09:22如果你的这个这个这个这个这个这个这个这个这个的特别大。比如说我读一个一个 payg 的这个数据，它的性能其实是会比这个这个啊本身不用一个 g 啊九九兆，它的性能其实会比这个你的这个跟 host 这个通信差的，为什么呢？我们最后我们统计了一下这个的我们发现很有意思的现象，
09:42就是我的这个 SOC。因为它的这个能能力相对来说功耗较低一点，所以它支持的这个 PCIE 的这个 MTU 啊是比 host 小的。就是说我的 SOC 通信啊，它得以一百二十八个 bit 为一个最最小单元去做通信。但是我的这个 host，
10:00它其实是可以以五幺二 bit 作为通信，这就导致了了一个结果。就是我对于同样一个大小的这个 LO 传输输，我对于这个的传输，它用的这个网络包的这个数量，实际上是要比这个比跟这个 SOC 这条路径上来说相比是要更更加更加更加少的。
10:16所以这导致这个结果就是当你的这个包啊，我们猜测啊，当你的这个包大到呃数据量大到一程度，你知道这包大到一程度之后，我的这个 SOC 上这个处理的 IO 单元处理不过来的啊，导致的一个结果。
10:27就是我们能很明显的观察到，当我这个 QL 大于一定数量的时候啊，这个这个这个这个性能其实是有有一个下降的这是一个很有意思的。像之前没有人发现过 OK，那这是我们第三个这个发现。当然我们还发现了一个很有意思的特性是有什么呢？
10:44就是说我们如果是要做个卸载，对吧？我们要要要让 SOC 和这个 host 去做这个通信。然后这个通信到底是怎么通信呢？就是英伟达它提供了一个默认的方法，就是 RDVA。
10:56就是说我 host 可以又当 CPU 嘛，我可以把它当成一个两个 RDV node，然后我用 RDV 通信。但是啊我们会发现一个发现很有意思，就是它又你你要你要支持 RDA 意味着什么？因为说你的这个网卡得有一套完整的这个硬件支持 RDA 协议，
11:12对不对？但是你目前这个网卡已经有一套支持 RDV 协议。如果你再加一套，你这个板子上没有空间了，怎么办呢？我们会发现这个这个英伟达这个网卡，
11:21它复用了就是 RDMA 的这部分网卡协议啊，去做这个通信啊，去做通信。但是这样一个通信会导致一个代价，就是第一一就非常重要，大家就是第一它的延迟会更高。
11:33大家想想，原本我们一个 RDB 通信，只需要经过一次劈赛，所以就结束了。但是啊我们这个这个为了为了这个这个这个这个我支持 RDB 能力，对吧？
11:41我当我 SOC 和后 s 通讯时，我得先过一遍这个后过一遍 PCS 维置，然后再反过来过一遍啊，反过来过一遍。好，这个我们就会发现有一个非常非常大的问题。
11:52就是一旦你用了这这套模式，你做一些卸载操作的话，会导致你的网卡带宽用户版。这个也就是之前我们会发现你这个啊 source source 二一的一篇 best paper，对吧？蓝 FS 对吧？
12:04它对于这个智能网卡用的是非常非常非常不不大好的。他当他做了什么事情呢？他干了一件事情，就是说他把这个文件系统的这个操作啊卸载到智能网卡上。也就是说我用户的一个包啊，他先发到这个智能网卡的 SOC 上。
12:18做完之后呢，他再把这个包啊、文件啊，再用这个同样的 IDB 去传回来。好，就是上面这样一种模式这样一种模式。
12:26好，那么大家想一想，我们上面这种模式理论来说，我看一下 SOC 之间是两百 GPSRDVRDV，对吧？然后 SO 的 OC 和 host 有二百五十九，
12:33 GB 的 PCIE。那理论上来说，我的这个文件分布式件系统的带宽应该是要达到两百 GBPS，对不对？但是大家想想，在我们这样一种需要来回互互相互相做的这个模式下，
12:48大家我一带一个看 act 发了一个请求。然后我后面一个看 act，他再发了一个同样的请求。以这种拍卖的方式形成之后，我们会发现一个什么实验，就是你同一个数据包，
12:59对吧？它其实会在你的这个网卡里面这个同条路径里走两次啊走两次，这就会导致的一个结果。就是我的实际可用的这个带宽，只是有只有这个 PCIE 带宽这个一半一半。那这样的话也就意味着什么呢？
13:13就是说它只能达到一百二十八 GPS，就是说它他那个他那个个他那东西从设从设计上上，就只能用满一半的这个网卡的这个带宽。那再来讲，那这肯定是一个非常糟糕的这样的设计。这个但是如果你没有一个对这个网卡一个非常清晰的这样的一个认知的话，
13:28其实你你你并不并不能知道这样是好。那怎么解决这个问题呢？其实我们会发现啊，这个我又来越王卡，它其实提供了这个一个叫 DMA 的这个能力。就是我的这个 CSOC 可以通过一个 DMA，
13:41他们叫多卡啊这种 data plan 对吧？其实是可以去访问的，可以访问的。虽然它这个用起来会更加麻烦一点，因为它的档档会更少。那么一个很直观的想法就是我们我们用这个 DMA 是吧，
13:51是不是就够了啊，是不是就够了啊？其实我们发现啊，就是说其实 DMA 对吧？它的延迟确实会比这个 RDM 要小很多，因为它这个路径上会快很多。
13:59但是我们这边发现一个问题，就是 DMA 它的这个吞吐啊实际上是不大过的，为什么呢？因为我们说你 RDMA 原本是一个网卡，网卡的话，它的这个 IOPS 能力非常强劲，
14:10对吧？所以它吞吐很高，但是本身我这 SOC 它功耗很低，它这个 DMA 设备的能力就很弱。所以导致一个结果就是啊我这个 DMA 啊它虽然延迟很低，但它的这个总的吞吐啊实际上是比这个这个 SOC 要要要比 RDMA 要慢很多的 OK。
14:27所以说我们就是发现你当我们把这个网卡这些大然都是我们最通过实验去去量下来。我们会发现这个这个东西它其实并没有想象中那么简单，有没有非常非常多的这个这个细节的点需要注意 OK。那么我们总结一下的话，这个怎么用这个网卡呢？对吧？
14:43其实我们就需要注意，第一就是它的这个 RDV 路径啊是会有些慢的。第二呢就是说我们的第二条路径就是和 SSOC 通信它性能是比较好的。但是它会有一些当理比如说你传大包的时候啊，这种东西是需要注意的。第三个呢，
14:55就是说我们在 SOC 和这个网卡这个通信之间啊，它实际上是有一些缺道子。比如说 DMA 你的吞吐不够，你这个 RDV 的话，你的这个带宽利用率实际上是忘记的。所以当我们这个 QS 的这个例子啊，
15:07我们就是会发现它确实是会很慢，对吧？第一就是说我们这个 SOC 的算力是不够的。第二就是我我这个通信，比如说你简单的后 st dvelom 这个这个 PCIE 这个这个这个这个 DMA 也好， RDMA 也好，
15:18它这个通信能力都是都是比较差的。所以说我们其实是这个这个能么那，我怎么呃性能是很差的那最后我们怎么优化呢？其优化方法跟我们前面讲的这个 KV cash 呃 QB derect QB derect 一样啊，基本上这个没有什么太大的区别。就是说我们核心观察就是好，
15:33我既然这个这个这个这个我这个王牌 SOC 等于效力不够，那我网络又有又有这个空闲怎么办呢？电机我们先要把网络的空闲用满 OK。然后第二呢，我们就是这个这个在空闲用满这个同时呢，我要去避免之前讲的那些，
15:47然后你 OK 啊，这样的话其实我们就能够做一个比较快的这个性能提升 OK。那这个这个因为使用关系我觉得可能也没有大，反正这就是比较细节的优化，对吧？大家感兴趣可以看我们的配合啊，
15:59反正这个也没有什么特别难的东西，我们考试也不会考这个 OK 行。那最后的话我们其实可以看效果，就是说啊我们把这些这些所有的优化全都用起来之后呢，其实这个 smart dick 它其实就能够在一个通用的相对通用的所有的 smart t 上，其实还是能够达到啊比这个这个 RDMIIK 更加啊快的这样的一个效果的。
16:16好吧？行，那我们今天这节课就要不就上到这边，我们只要讲的是这个这个管理相关内容。好，行，
16:22我们今天就下课我的你。如果你没有协议的标准，一个是不清楚，不会三次。是的，我们这个跑的时候是一秒钟，
17:14这是意思是二十多个。我要看一下啊，没有显示我原本一千块钱，那上我跟他应该都可以，不是新新的不降价，你能给你个操作，
17:46你的是没你的时间，一百斤嗯，很感惜，也就给在一起。没有什么是在你知道跑不完了，没有死，
18:40我在跑论事目中，算了算了，你要不你把那个摩擦键，对，我给你买整理东西。然后对，
18:49然后这个是对是这的。嗯嗯，好，没事，上面是行不少。其实那你拿回他是你喜欢我这个地方，
19:43但是说啊没有人手的优势，就是我们第一些事是那谁占内存被如糊就可以，那这这肯定没有啊，这内存都占不上，美女都是那可有的。因为嗯但是他他可以占到五十以上，
20:16没有数据性以及不同意。你都是靠嗯是不是？因为就是一个学术成绩都是你饿了对题。那可执性文件叫什么？还可以，这是你说他是一些极致的这上天是不是？
21:54你这个是开始不是除以百分之七十，你要不你对我们的地箱一致，你尤其你是这样子不太可能这个开会产品，你看你看这个这个这这个指令皮被照信号嗯，一直慢慢搞的。那个就是可能自己是有没有徒弟下单的个我是从老在文件，
28:05这个无所谓，直接插掉。这个是那个行驶证做个验证，是你拍的吧，每天我们就睡，到底什么可以，
28:48但是那都在那里跟我们以前的这个配置，估计这个地方。行，我先查下申请一，是不是直接强调不行，文件开个电脑，
29:27然后做文件是有的，你得看，因为他也是一种不事。我有四个问题，我想想，但是不能可以看。
29:38还有一个，然后我们回去用文件，你也可以电脑上，我不放你的膝盖啊。没有没有的话，如果我电脑现在真是比你更差一点不行了。
29:58算了，不也两个啊，工作嘛，一天日常执行，我要去找他了。小丑嗯，
30:09我投投资者是我们一起，可以我们一起，你会爱我来来去去。我感觉现在还同样老师也不管，还让我跟是不是那样，我现在所本也干不了，
30:30干不了，整天就能跑个测试，跑个测试，还给自己跑五招很快是是谁？以前人在这里怎么进击，怎么立击旋转。
30:49对，这个因为我利基我一一直太吵的，所以考我很经常性，就是为别人一千到一百一千是嗯是吃去嗯嗯经的这个动径。就我觉得那家还就说这个没事，现在经常一点，
43:19你超超你出，我觉得真的很好好吃。他那个犹太性是的，就是好吃的，都不像是健康餐，就是感觉是视频的，
43:32他也算是够了。嗯嗯，感觉学不成感觉就是那是那我这边我这道菜菜已经进过了，你之前说的青石吗？就不是青石，就是这哦，
43:52对，这个东西我上次去吃那个那个陈香味牛肉面不是厉害，而且就是还卖继续理解。我就点嗯就是就哎，你是是这个以前就是那个就所以你这就纯熟可以，饭没有十六长心脏紧一，
45:06你给也是，是是干啥？你去说话不会记，因为他不需要你添加任何直接没有啊，多很多土豆的那个一个你也不好意。对对对，
51:22真的吗？这是什么东就就是为什么会让你这谢？这个没有，因为因为一年的问题，你才看一年都不一定要看不见，还不睡觉。
51:41这个你不用睡觉的，好孩子，是我弄到他在床子之后还有电。哎呀，怎么零三**太热了了解他应该没介绍，但是不会是喜欢不资援。
52:06而且行，我是可一个我跟觉等。对，我们赶紧这个规定，但是我问了有这个，看这个吧，
52:31认真配置没有啊，我听那个你听我的吗？你等一下，这个就有那种有气包包包，在这里包包包包在问你给你们一啥行，你使用吗？
52:50所以我躲起来。对，当然我还是至少至少报告这个地方，我不会可以选择跟我在卧里认识一下，可可以有情侣可以什么什么。学习很强，
53:06大力史好天的确是在一起，稍等有点半意插面是不是叫什么范利剑，还是那个欢迎西游记，他要筛什么筛什么了，东意须是会筛的，这里就去，
53:34没有快就好。今天的国地，去年这个啥其实感觉广泛人看懂作品还没走，碰到那个谁么之后呢，一天的一看，其余的就是以解锁学生思维，
54:05奖励勇气、转身安全备在包中。对，带你上个东间其实其实考虑了蛮多的，他只会这一点。两的年还有下的我就是三二，
54:25因为五十二还是九十三九九零，应该绝对是很舒的啊，差不多。关注购物袋链链链接只能再去到一遍，但是我不愿意是行动，还没什么事情使用。
54:51有这样快快快出十了，这个是不是并不，